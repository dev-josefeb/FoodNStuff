<div class="main-container">
  <h1 class="text-center">Shopping Cart</h1>
  <ng-container *ngIf="cart$ | async as cart">
    <p class="text-center">You have {{ cart.totalItemsCount }} items in your shopping cart</p>
    <div class="row">
      <div @exitAnimation *ngIf="cart.items.length > 0" class="mat-elevation-z8 container">
        <table class="table borderless table-striped table-hover">
          <thead class="thead-dark">
            <tr>
              <th>Product</th>
              <th>Quantity</th>
              <th>Total Price</th>
            </tr>
          </thead>
          <tbody @todosAnimation>
            <tr @todoAnimation *ngFor="let item of cart.items; trackBy: identify">
              <td><img [src]="item.imageUrl" /> {{ item.title }}</td>
              <td>
                <product-quantity [product]="item" [shopping-cart]="cart"></product-quantity>
              </td>
              <td>{{ item.totalPrice | currency: "EUR" }}</td>
            </tr>
            <tr @todoAnimation>
              <th></th>
              <th>Total Price (incl. Tax):</th>
              <th>{{ cart.totalPrice | currency: "EUR" }}</th>
            </tr>
          </tbody>
        </table>
        <div class="text-center">
          <button (click)="clearCart()" class="btn btn-secondary btn-block btn-sm">Clear Shopping Cart</button>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="text-center col-md-4">
          <button routerLink="/products" class="btn btn-secondary btn-block">Continue Shopping</button>
        </div>
        <div class="col-md-4"></div>
        <div class="text-center col-md-4">
          <button routerLink="/checkout" *ngIf="cart.items.length" class="btn btn-primary btn-block">Proceed to Checkout</button>
        </div>
      </div>
    </div>
  </ng-container>
</div>
